#include "motor.h"

extern int Pwm1;
extern int Pwm2;

void MOTOR_GO()
{

  __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_1,Pwm1);	//PWM调速
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_4,GPIO_PIN_RESET);
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5,GPIO_PIN_SET);

  __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_4,Pwm2);	//PWM调速
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_7,GPIO_PIN_RESET);
  HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_SET);

}

void MOTOR_BACK()
{
  __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_1,Pwm1);	//PWM调速
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5,GPIO_PIN_RESET);
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_4,GPIO_PIN_SET);

  __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_4,Pwm2);	//PWM调速
  HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_RESET);
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_7,GPIO_PIN_SET);

}

void MOTOR_LEFT()
{
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5,GPIO_PIN_RESET);
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_4,GPIO_PIN_RESET);
}

void MOTOR_RIGHT()
{
  __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_1,1);
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_4,GPIO_PIN_RESET);
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5,GPIO_PIN_SET);
}

void MOTOR_STOP()
{
  __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_1,0);
	 __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_4,0);
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_4,GPIO_PIN_RESET);
  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5,GPIO_PIN_RESET);
	  HAL_GPIO_WritePin(GPIOA,GPIO_PIN_7,GPIO_PIN_RESET);
  HAL_GPIO_WritePin(GPIOB,GPIO_PIN_0,GPIO_PIN_RESET);
}

